<h1>ADD TEACHER</h1>

<form>
    <h3>PERSONAL INFORMATION</h3>

    <div class="fmname">
        <div class="input-container">
          <input class="round-input" type="text" name="fname" placeholder="First Name" formControlName="fname">
          
        </div>
        <div class="input-container">
          <input class="round-input" (input)="capitalizeFirstLetter($event, 'mname')" type="text" placeholder="Middle Name" name="mname" formControlName="mname">
        </div>
    </div>
    <div class="errordiv">
    <ng-container *ngFor="let validation of validationMessages.fname">
        <div class="error_message" *ngIf="ValidationFormUser.get('fname')?.hasError(validation.type) && (ValidationFormUser.get('fname')?.dirty || ValidationFormUser.get('fname')?.touched)">
        {{validation.message}}
        </div>
    </ng-container>
    </div>
      
    <div class="lname">
        <input class="round-input" (input)="capitalizeFirstLetter($event, 'lname')" type="text" name="lname" placeholder="Last Name" formControlName="lname">
        <ng-container *ngFor="let validation of validationMessages.lname">
            <div class="error_message" *ngIf="ValidationFormUser.get('lname')?.hasError(validation.type) && (ValidationFormUser.get('lname')?.dirty || ValidationFormUser.get('lname')?.touched)">
            {{validation.message}}
            </div>
        </ng-container>
    </div>
      
    <div class="address">
    <input class="round-input" (input)="capitalizeFirstLetter($event, 'address')" type="text" name="address" placeholder="Address" formControlName="address">
    <ng-container *ngFor="let validation of validationMessages.address">
        <div class="error_message" *ngIf="ValidationFormUser.get('address')?.hasError(validation.type) && (ValidationFormUser.get('address')?.dirty || ValidationFormUser.get('address')?.touched)">
        {{validation.message}}
        </div>
    </ng-container>
    </div>

    <div class="address">
    <input class="round-input" type="tel" name="phone" placeholder="Phone Number" formControlName="phone" inputmode="numeric" (input)="restrictNonNumeric($event)">
    <ng-container *ngFor="let validation of validationMessages.phone">
        <div class="error_message" *ngIf="ValidationFormUser.get('phone')?.hasError(validation.type) && (ValidationFormUser.get('phone')?.dirty || ValidationFormUser.get('phone')?.touched)">
        {{validation.message}}
        </div>
        <!-- <div class="error_message" *ngIf="phoneError">
        Incorrect number. Please enter a 11-digit phone number.
        </div> -->
    </ng-container>
    </div>
    <div class="gend-bday">
        <div class="input-container">
          <select label-placement="floating" fill="outline" label="Gender" class="custom-select" name="gender" formControlName="gender">
            <option value="female">Female</option>
            <option value="male">Male</option>
          </select>
          <ng-container *ngFor="let validation of validationMessages.gender">
            <div class="error_message" *ngIf="ValidationFormUser.get('gender')?.hasError(validation.type) && (ValidationFormUser.get('gender')?.dirty || ValidationFormUser.get('gender')?.touched)">
              {{validation.message}}
            </div>
          </ng-container>
        </div>
        <div class="input-container">
          <input id="open-modal" class="round-input-calendar" type="text" name="birthdate" formControlName="birthdate" readonly>
            <!-- <ion-icon name="calendar" icon="calendar-outline" slot="start" ></ion-icon> -->
            <label >{{ formattedString }}</label>

          <!-- <ion-modal trigger="open-modal" mode="md">
            <ng-template>
              <ion-content>
                <ion-datetime [presentation]="date"
                  #date
                  [value]="dateValue" 
                  size="cover"
                  (ionChange)="dateChanged(date.value)"
                  showDefaultButtons="true"
                  (ionCancel)="showPicker = false;">
                </ion-datetime>
              </ion-content>
            </ng-template>
          </ion-modal> -->
          
        </div>
    </div>
    <div class="assigninfo">
        <label class="personalinfo">ADVISING SECTION</label>
      </div>
      <div class="gr-sec">
        <div class="input-container">
          
          <select label-placement="floating" 
            fill="outline" 
            label="Grade Level" 
            class="custom-select" 
            name="gradelevel" 
            formControlName="gradelevel">
            <option *ngFor="let gradeLevel of gradeLevels" [value]="gradeLevel">{{ gradeLevel }}</option>
          </select>
          <ng-container *ngFor="let validation of validationMessages.gradelevel">
            <div
              class="error_message"
              *ngIf="
                ValidationFormUser.get('gradelevel')?.hasError(validation.type) &&
                (ValidationFormUser.get('gradelevel')?.dirty || ValidationFormUser.get('gradelevel')?.touched)
              "
            >
              {{ validation.message }}
            </div>
          </ng-container>
          
        </div>
        <div class="input-container-section">
          
          <select label-placement="floating" 
            fill="outline" 
            label="Section" 
            class="custom-select" 
            name="section" 
            formControlName="section">
            <option *ngFor="let section of sections" [value]="section">{{section}}</option>
          </select>
          <ng-container *ngFor="let validation of validationMessages.section">
            <div
              class="error_message"
              *ngIf="
                ValidationFormUser.get('section')?.hasError(validation.type) &&
                (ValidationFormUser.get('section')?.dirty || ValidationFormUser.get('section')?.touched)
              "
            >
              {{ validation.message }}
            </div>
          </ng-container>
        </div>

      </div>

      <div class="assigninfo">
        <label class="personalinfo">ASSIGNED SUBJECTS</label>
      </div>
      <div class="addsubjdiv">
        <button class="addsubj">Add subject</button>
      </div>
      <div formArrayName="assignments">
        <div *ngFor="let assignment of assignments.controls; let i = index" [formGroupName]="i">
          <div class="input-container-section">
            <select label-placement="floating" fill="outline" label="Grade & Section" class="custom-select" formControlName="gradelevel">
              <option *ngFor="let gradeLevelss of gradeLevelss" [value]="gradeLevelss">
                {{ gradeLevelss }}
              </option>
            </select>
          </div>
          <div class="input-container-section">
            <select multiple="true" 
              label-placement="floating" 
              fill="outline" 
              label="Subjects" 
              class="custom-select" 
              formControlName="subjects">
              <option *ngFor="let subject of subjects" [value]="subject">
                {{ subject }}
              </option>
            </select>
          </div>
          <button class="remsubj" color="danger">
            Remove</button>

        </div>
        

      </div> 


      <div class="accdeets">
        <label>ACCOUNT DETAILS</label>
      </div>
      
      <div class="email">
        <input class="round-input" type="email" name="email" placeholder="Email" formControlName="email">
        <ng-container *ngFor="let validation of validationMessages.email">
          <div class="error_message" *ngIf="ValidationFormUser.get('email')?.hasError(validation.type) && (ValidationFormUser.get('email')?.dirty || ValidationFormUser.get('email')?.touched)">
            {{validation.message}}
          </div>
        </ng-container>
        <div class="error_message" *ngIf="emailExistsError">
          Email already exists.
        </div>
      </div>
      <div class="pw">
        <input class="round-input" type="password" name="password" placeholder="Password" formControlName="password">
        <ng-container *ngFor="let validation of validationMessages.password">
          <div class="error_message" *ngIf="ValidationFormUser.get('password')?.hasError(validation.type) && (ValidationFormUser.get('password')?.dirty || ValidationFormUser.get('password')?.touched)">
            {{validation.message}}
          </div>
        </ng-container>
      </div>

      <div class="addstuddiv">
        <button class="addstudbutton" type="submit" [disabled]="!ValidationFormUser.valid">Add Teacher</button>
      </div>
</form>